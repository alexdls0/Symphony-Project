{"filter":false,"title":"LocaleSubscriber.php","tooltip":"/symfony4/src/EventSubscriber/LocaleSubscriber.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":38,"column":1},"action":"insert","lines":["<?php","","namespace App\\EventSubscriber;","","use Symfony\\Component\\EventDispatcher\\EventSubscriberInterface;","use Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent;","use Symfony\\Component\\HttpKernel\\KernelEvents;","","class LocaleSubscriber implements EventSubscriberInterface {","","    private $defaultLocale;","","    public function __construct($defaultLocale = 'en') {","        $this->defaultLocale = $defaultLocale;","    }","","    public function onKernelRequest(GetResponseEvent $event) {","        $request = $event->getRequest();","        if (!$request->hasPreviousSession()) {","            return;","        }","","        // try to see if the locale has been set as a _locale routing parameter","        if ($locale = $request->attributes->get('_locale')) {","            $request->getSession()->set('_locale', $locale);","        } else {","            // if no explicit locale has been set on this request, use one from the session","            $request->setLocale($request->getSession()->get('_locale', $this->defaultLocale));","        }","    }","","    public static function getSubscribedEvents() {","        return [","            // must be registered before (i.e. with a higher priority than) the default Locale listener","            KernelEvents::REQUEST => [['onKernelRequest', 20]],","        ];","    }","","}"],"id":1}]]},"ace":{"folds":[],"scrolltop":58,"scrollleft":0,"selection":{"start":{"row":38,"column":1},"end":{"row":38,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1559149297021,"hash":"0dd44d549215cccdd46ebf8a37bfa2dabc2170d9"}